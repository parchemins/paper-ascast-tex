\SetKwProg{Function}{func}{}{}

\small

\DontPrintSemicolon
\LinesNumbered

$O_p$, $W_p$\tcp*[r]{set of neighbors and weights}
$A^d_s \rightarrow \alpha^\infty_\varnothing$ \tcp*[r]{smallest distance $d$ to Source $s$}


\BlankLine

\lFunction(\tcp*[f]{become source}){\textup{\texttt{Add( )}}} {
  \textup{receiveAdd($\varnothing$, $\alpha_p^0$)} \label{line:lowestbound}
}

\BlankLine

\Function{\textup{receiveAdd($q$, $\alpha_{s'}^{d'}$)} \tcp*[f]{notification from $q$}} {
  \If (\tcp*[f]{check predicate ($\phi$)}){\smash{$\alpha^{d'}_{s'} < A^d_s$}} {
      $\smash{A_s^d \leftarrow \alpha_{s'}^{d'}}$ \tcp*[r]{deliver and update ($\sigma$)}

      \lForEach(\tcp*[f]{fwd}) {$n \in O_p \setminus q$} {
          \textup{send$_n$(\smash{$\alpha^{d' + w_{pn}}_{s'}$})} \label{line:accumulator}
       }      
  }
}

%% \BlankLine

%% \Function{\textup{edgeUp($q$)} \tcp*[f]{new link to $q$}} {
%%   \lIf { $d < \infty$} {\textup{send$_q$($s, d + W_{pq}$)}}
%% }


