\SetKwProg{Function}{func}{}{}

\small

\DontPrintSemicolon
\LinesNumbered

$O_p$, $W_p$\tcp*[r]{set of neighbors and weights}
$s \leftarrow \varnothing$ \tcp*[r]{best source of partition ($\sigma$)}
$d \leftarrow \infty$ \tcp*[r]{smallest distance to $s$ ($\sigma$ and $\mu$)}


\BlankLine

\Function{\textup{\texttt{Add ( )}} \tcp*[f]{become a source}} {
  \textup{receiveAdd($\varnothing$, $p$, $0$)} \label{line:lowestbound} \tcp*[f]{$b_p(\alpha_p^0)$}
}

\BlankLine

\Function{\textup{receiveAdd($q$, $s'$, $d'$)} \tcp*[f]{$r_p(\alpha_{s'}^{d'})$ from $q$}} {
  \If (\tcp*[f]{distance predicate ($\phi$)}){$d' < d$} {
      $s \leftarrow s'$ \tcp*[r]{deliver \smash{$d_p(\alpha_{s'}^{d'})$}}
      $d \leftarrow d'$ \tcp*[r]{update local state ($\sigma$)}

      \ForEach(\tcp*[f]{\smash{forward $f_p(\alpha_{s'}^{d'})$}}) {$n \in O_p \setminus q$} {
          \textup{send$_n$($s', d' + W_{pn}$)} \label{line:accumulator}
          \tcp*[r]{\smash{$s_{pn}(\alpha_{s'}^{d'+w_{pn}})$}}
       }      
  }
}

%% \BlankLine

%% \Function{\textup{edgeUp($q$)} \tcp*[f]{new link to $q$}} {
%%   \lIf { $d < \infty$} {\textup{send$_q$($s, d + W_{pq}$)}}
%% }


