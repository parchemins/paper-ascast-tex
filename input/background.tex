
\section{Background and motivation}
\label{sec:background}

Fog infrastructures are distributed systems comprising heterogeneous
machines interconnected by communication links.

\begin{definition}[Fog infrastructure]
  A fog infrastructure is a \underline{g}raph $G(V, E)$ of
  \underline{v}ertices $V$ and bidirectional \underline{e}dges $E \in
  V \times V$. Edges have symmetric \underline{w}eights $w_{ij} =
  w_{ij}$ with $i, j \in V$.
\end{definition}

\begin{definition}[Logical partitions]
  A logical \underline{p}artition $P_s$ originated at a
  \underline{s}ource process $s \in V$ is a set of interconnected
  processes that do not belong to another logical partition.
\end{definition}

\begin{definition}[Optimal partitioning]
  The optimal partitioning $\mathcal{P}$ is a set of logical
  partitions such that each process belongs to a logical partition
  comprising its closest source process. $\forall p \in P_{s_1},
  \nexists P_{s_2}$ such that \TODO{$distance(p, s_2) < distance(p,
    s_1)$}.
\end{definition}

When $distance$ involves monotonically increasing scalars such as
latency or number of hops between sources and processes, the optimal
partitioning consists in processing the multiple destinations shortest
path~\REF at each process. \TODO{Easy to solve when all processes
  receives all messages.}


Algorithm~\ref{algo:add} shows the instructions of dynamic
partitioning where the only operation available to processes is the
adding of a partition.  Line~\ref{line:lowestbound} shows the lowest
bound. Line~\ref{line:accumulator} shows the accumulator.

\begin{algorithm}
  \input{input/algoadd.tex}
  \caption{\label{algo:add}Adding partitions by Process $p$.}
\end{algorithm}


\begin{figure*}
  \begin{center}
    \subfloat[Part A][\label{fig:addA}Both Process $a$ and
      Process $c$ initiate a partition.
      $w_{ab} = 1.5$; $w_{bc} = w_{cd} = w_{bd} = 1$.]{\input{input/figaddA.tex}}
    \hspace{5pt}
    \subfloat[Part B][\label{fig:addB}Messages transit through communication
      links and carry increasing weights.]{\input{input/figaddB.tex}}
    \hspace{5pt}
    \subfloat[Part C][\label{fig:addC}Process $b$ receives and forwards
      $Add_{c, +1}$ then discards $Add_{a, +1.5}$, for the latter distance
      is higher.]{\input{input/figaddC.tex}}
    \hspace{5pt}
    \subfloat[Part D][\label{fig:addD}Processes $b$, $c$, and $d$ discard
      incoming messages. The system converged to optimal partitions.]{
      \input{input/figaddD.tex}}
    \caption{\label{fig:add}Simple accumulation in messages makes the
      system converge to optimal partitions with contained
      flooding.}
  \end{center}
\end{figure*}


Transitive relationships ensure that each process gets its closest
source while accumulators ensure that messages propagation
terminates. The system converges towards the optimal partitioning
despite processes not broadcasting all messages. Removals of
partitions are more challenging. \TODO{Figure.} \TODO{Also easy to
  solve when all processes receive all messages}. One could solve this
issue by removing partitions that were not advertised for a defined
time~\REF. However, relying on physical timeout could lead to either
premature removals of partitions when they are still operating; or
slow convergence where processes believe they belong to a partition
that was removed.

\TODO{Problem statement.}

\TODO{Next Section presents our approach that solves this problem
  statement by relying only on logical control information.}

%%% Local Variables: 
%%% mode: latex
%%% TeX-master: "../paper"
%%% ispell-local-dictionary: "english"
%%% End: 

