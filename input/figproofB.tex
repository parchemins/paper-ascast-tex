
\begin{tikzpicture}[scale=0.75]

  \thickmuskip=0mu
  \medmuskip=0mu
  \thinmuskip=0mu
  
  \newcommand\X{120pt}
  \newcommand\Y{-70pt}

  \newcommand\ADD{\alpha}
  \newcommand\DEL{\delta}
  \newcommand\DELDEL{\Delta}

  \draw[opacity=0] (-1.4*\X, 0) -- (2.4*\X, 0);
  


  \draw[dotted] (-1.5*\X, 0pt) -- (-1.35*\X, 0pt); %% X ->
  
  \draw[->] (-1.15*\X, 0) -- (-5pt + -1*\X, 0); \draw[dotted] (-1.25*\X, 0) -- (-1.15*\X, 0);
  \draw (5pt + 2*\X, 0) -- (2.15*\X, 0); \draw[dotted,->] (2.15*\X, 0) -- (2.25*\X, 0);
  
  \draw[<->] (5pt - \X, 0.4*\Y) --
  node[below, font=\small, align=center]{\textbf{I: propagation}\\\textbf{of $\delta$ messages}}
  (-5pt, 0.4*\Y); %% I as well
  
  \draw[->] (-\X + 5pt, 0)
  node[below=-0.3em, below right, font=\scriptsize]{$\DEL_X \rightarrow$}
  -- (0 - 5pt, 0)
  node [below=-0.15em, below left, font=\tiny]{$\textcolor{\WRONG}{a \neq c}$}
  ; %% d - e

  \draw[<->] (5pt , 0.4*\Y) --
  node[below, font=\small, align=center]
  {\textbf{II: detection}\\\textbf{of inconsistencies}}
  (-5pt + \X, 0.4*\Y); %% IV
  
  \draw[->] (0 +5pt, 0)
  node[below=-0.3em, below right, font=\tiny]{$\textcolor{\PY}{\ADD_Y^{y'}} \rightarrow$}
  --
  (\X -5pt, 0)
  node [left= -0.15em, below=-0.3em, below left, font=\tiny]{$\textcolor{\WRONG}{\DEL_Y^{\vphantom{y'}} \not\rightarrow \ADD_Y^{y'}}$}
  ; %% e - f
  
  \draw[<->] (5pt +\X , 0.4*\Y) --
  node[below, font=\small, align=center]{\textbf{III: propagation}\\\textbf{of $\DELDEL$ messages}}
  (-5pt + 2*\X, 0.4*\Y); %% V
  
  \draw[->] ( \X +5pt, 0) -- (2*\X -5pt, 0); %% b - g

  \draw[dotted] (0.5*\X, 1.25*\Y) -- (0.2*\X, 1.1*\Y); %% Y ->
  \draw[dotted] (0.5*\X, 1.25*\Y) -- (0.8*\X, 1.1*\Y); %% Y ->



  \draw[fill=white] (-1.5*\X, 0) node{$\bm{X}$} +(-5pt, -5pt) rectangle +(5pt, 5pt);
  \draw[fill=white] (-\X, 0) node{$\bm{a}$} +(-5pt, -5pt) rectangle +(5pt, 5pt);  
  \draw[fill=white] (0, 0) node[color=\PY]{$\bm{b}$} +(-5pt, -5pt) rectangle +(5pt, 5pt);
  \draw[fill=white] (\X, 0) node[color=\PX]{$\bm{c}$} +(-5pt, -5pt) rectangle +(5pt, 5pt);
  \draw[fill=white] (2*\X, 0) node[color=\PX]{$\bm{d}$} +(-5pt, -5pt) rectangle +(5pt, 5pt);
  \draw[fill=white] (0.5*\X, 1.25*\Y) node{$\bm{Y}$}+(-5pt, -5pt) rectangle +(5pt, 5pt);



  \draw (-1.5*\X, 5pt) node[above, font=\footnotesize]{$\textcolor{\PX}{\ADD_X} \rightarrow \DEL_X$};
  
  \draw (-\X, 5pt) node[above, font=\tiny]{$\textcolor{\PX}{\ADD_X} \rightarrow \DEL_X$};
  
  \draw ( 0, 5pt) node[above, font=\footnotesize]{$
    \xrightarrow[\textcolor{\PX}{\ADD_X^{\vphantom{x'}}}]{\mbox{\tiny{before}}}
    \xrightarrow[\textcolor{\PY}{\ADD_Y^{y\vphantom{'}}}]{\mbox{\tiny{last}}}
    \xrightarrow[\DEL_Y^{\vphantom{y'}} ]{\mbox{\tiny{expect}}}$};
  
  \draw ( \X, 5pt) node[above, font=\footnotesize]{$
    \xrightarrow[\textcolor{\PY}{\ADD_Y^{\vphantom{y'}}} \rightarrow
      \DEL_Y^{\vphantom{y'}}]{\mbox{\tiny{before}}}
    \xrightarrow[\textcolor{\PX}{\ADD_X^{x'}}]{\mbox{\tiny{last}}}
    \xrightarrow[\DELDEL_X^{\vphantom{y'}}]{\mbox{\tiny{expect}}}$};

  \draw (2*\X, 5pt) node[above, font=\footnotesize]{$
    \xrightarrow[\textcolor{\PX}{\ADD_X^{x''}}]{\mbox{\tiny{last}}}
    \xrightarrow[\DELDEL_X^{\vphantom{x'}}]{\mbox{\tiny{expect}}}$};

  \draw (0.5*\X, 1.25*\Y+5pt) node[above, font=\footnotesize] {$\textcolor{\PY}{\ADD_Y} \rightarrow \DEL_Y$};
  


  \draw[->] (-\X,  0.5*\Y) -- (-\X, -5pt);
  \draw[dotted] (-\X,  0.5*\Y) -- (-\X, 0.9*\Y);

  \draw[->] ( 0,  0.5*\Y) -- ( 0, -5pt);
  \draw[dotted] ( 0,  0.5*\Y) -- ( 0, 0.9*\Y);

  \draw[->] ( \X,  0.5*\Y) -- ( \X, -5pt);
  \draw[dotted] ( \X,  0.5*\Y) -- ( \X, 0.9*\Y);

  \draw[->] (2*\X,  0.5*\Y) -- (2*\X, -5pt);
  \draw[dotted] (2*\X,  0.5*\Y) -- (2*\X, 0.9*\Y);
  
\end{tikzpicture}
